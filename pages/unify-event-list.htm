title = "Unify Event List"
url = "/unify-event-list"
layout = "unify/unify-blank"
description = "This is a modified version of the event lists page. It lists all the events in the theme timeline layout and will be used live. There are still a few things to fix."
is_hidden = 0

[builderList]
modelClass = "ElliotSchepPatrickJamel\Events\Models\Events"
scope = "-"
displayColumn = "event_title"
noRecordsMessage = "No records found"
detailsPage = "event-single"
detailsKeyColumn = "slug"
detailsUrlParameter = "slug"
pageNumber = "{{ :page }}"
==
{% put head %}
<link rel="stylesheet" href="{{ 'assets/unify/css/pages/shortcode_timeline1.css'|theme }}">
{% endput %}

{% set records = builderList.records %}
{% set displayColumn = builderList.displayColumn %}
{% set noRecordsMessage = builderList.noRecordsMessage %}
{% set detailsPage = builderList.detailsPage %}
{% set detailsKeyColumn = builderList.detailsKeyColumn %}
{% set detailsUrlParameter = builderList.detailsUrlParameter %}

{% if records %}
<!--=== Content Part ===-->
<div class="container content">

    <ul class="timeline-v1">
        {% for record in records %}
        <li class="{{ cycle(['', 'timeline-inverted'], loop.index0) }}">

                <div class="timeline-badge primary"><i class="glyphicon glyphicon-record"></i></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <img class="img-responsive" src="{{ '/storage/app/media' ~ record.background_image }}" alt=""/>
                            </div>
                            
                            <div class="timeline-body text-justify">
                                <h2 class="font-light">
                                {% if detailsPage %}
                                    <a href="{{ detailsPage|page({ (detailsUrlParameter): attribute(record, detailsKeyColumn) }) }}">
                                {% endif %}
                                {{ record.event_title }}
                                {% if detailsPage %}
                                    </a>
                                {% endif %}
                                </h2>
                                
                                <p>{{ str_limit(record.event_subtitle, 240) }}</p>
                                <a class="btn-u btn-u-sm" href="{{ detailsPage|page({ (detailsUrlParameter): attribute(record, detailsKeyColumn) }) }}">View Event</a>
                            </div>
                            <div class="timeline-footer">
                                <ul class="list-unstyled list-inline blog-info">
                                    <li><i class="fa fa-clock-o"></i> {% if record.event_date %}{{ record.event_date }}{% endif %}</li>
                                </ul>
                            </div>
                        </div>
                    </li>
        {% else %}
            <li class="no-data">{{ noRecordsMessage }}</li>
        {% endfor %}
                <li class="clearfix" style="float: none;"></li>
        </ul>
</div><!--/container-->
<!-- End Content Part -->
{% else %}
<div class="alert alert-success" role="alert">{{ 'There are currently no Events. Please check back again soon!'|_ }}</div>    
{% endif %}